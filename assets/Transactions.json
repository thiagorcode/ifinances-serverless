{
  "Resources": {
   "ReportsDLQueue8F55E02B": {
    "Type": "AWS::SQS::Queue",
    "Properties": {
     "QueueName": "ReportsTransactionsDLQueue"
    },
    "UpdateReplacePolicy": "Delete",
    "DeletionPolicy": "Delete",
    "Metadata": {
     "aws:cdk:path": "CombinedStack/TransactionsStack/TransactionsStack/ReportsDLQueue/Resource"
    }
   },
   "SqsReportsTransactions17AFED51": {
    "Type": "AWS::SQS::Queue",
    "Properties": {
     "QueueName": "SQSReportsTransactionsQueue",
     "RedrivePolicy": {
      "deadLetterTargetArn": {
       "Fn::GetAtt": [
        "ReportsDLQueue8F55E02B",
        "Arn"
       ]
      },
      "maxReceiveCount": 1
     },
     "SqsManagedSseEnabled": false
    },
    "UpdateReplacePolicy": "Delete",
    "DeletionPolicy": "Delete",
    "Metadata": {
     "aws:cdk:path": "CombinedStack/TransactionsStack/TransactionsStack/SqsReportsTransactions/Resource"
    }
   },
   "ReportsTransactionsMonthlyDdbD1EA9DE8": {
    "Type": "AWS::DynamoDB::Table",
    "Properties": {
     "KeySchema": [
      {
       "AttributeName": "id",
       "KeyType": "HASH"
      }
     ],
     "AttributeDefinitions": [
      {
       "AttributeName": "id",
       "AttributeType": "S"
      }
     ],
     "ProvisionedThroughput": {
      "ReadCapacityUnits": 1,
      "WriteCapacityUnits": 1
     },
     "TableName": "finances-reports-transactions-monthly"
    },
    "UpdateReplacePolicy": "Delete",
    "DeletionPolicy": "Delete",
    "Metadata": {
     "aws:cdk:path": "CombinedStack/TransactionsStack/TransactionsStack/ReportsTransactionsMonthlyDdb/Resource"
    }
   },
   "reportsTransactionsMonthlyFunctionHandlerServiceRole59E03DD5": {
    "Type": "AWS::IAM::Role",
    "Properties": {
     "AssumeRolePolicyDocument": {
      "Statement": [
       {
        "Action": "sts:AssumeRole",
        "Effect": "Allow",
        "Principal": {
         "Service": "lambda.amazonaws.com"
        }
       }
      ],
      "Version": "2012-10-17"
     },
     "ManagedPolicyArns": [
      {
       "Fn::Join": [
        "",
        [
         "arn:",
         {
          "Ref": "AWS::Partition"
         },
         ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
        ]
       ]
      }
     ]
    },
    "Metadata": {
     "aws:cdk:path": "CombinedStack/TransactionsStack/TransactionsStack/reportsTransactionsMonthlyFunctionHandler/ServiceRole/Resource"
    }
   },
   "reportsTransactionsMonthlyFunctionHandlerServiceRoleDefaultPolicy5CB66172": {
    "Type": "AWS::IAM::Policy",
    "Properties": {
     "PolicyDocument": {
      "Statement": [
       {
        "Action": [
         "sqs:ChangeMessageVisibility",
         "sqs:DeleteMessage",
         "sqs:GetQueueAttributes",
         "sqs:GetQueueUrl",
         "sqs:ReceiveMessage"
        ],
        "Effect": "Allow",
        "Resource": {
         "Fn::GetAtt": [
          "SqsReportsTransactions17AFED51",
          "Arn"
         ]
        }
       },
       {
        "Action": [
         "dynamodb:BatchGetItem",
         "dynamodb:BatchWriteItem",
         "dynamodb:ConditionCheckItem",
         "dynamodb:DeleteItem",
         "dynamodb:DescribeTable",
         "dynamodb:GetItem",
         "dynamodb:GetRecords",
         "dynamodb:GetShardIterator",
         "dynamodb:PutItem",
         "dynamodb:Query",
         "dynamodb:Scan",
         "dynamodb:UpdateItem"
        ],
        "Effect": "Allow",
        "Resource": [
         {
          "Fn::GetAtt": [
           "ReportsTransactionsMonthlyDdbD1EA9DE8",
           "Arn"
          ]
         },
         {
          "Ref": "AWS::NoValue"
         }
        ]
       }
      ],
      "Version": "2012-10-17"
     },
     "PolicyName": "reportsTransactionsMonthlyFunctionHandlerServiceRoleDefaultPolicy5CB66172",
     "Roles": [
      {
       "Ref": "reportsTransactionsMonthlyFunctionHandlerServiceRole59E03DD5"
      }
     ]
    },
    "Metadata": {
     "aws:cdk:path": "CombinedStack/TransactionsStack/TransactionsStack/reportsTransactionsMonthlyFunctionHandler/ServiceRole/DefaultPolicy/Resource"
    }
   },
   "reportsTransactionsMonthlyFunctionHandler5AABCC69": {
    "Type": "AWS::Lambda::Function",
    "Properties": {
     "Code": {
      "S3Bucket": "cdk-hnb659fds-assets-735084759467-sa-east-1",
      "S3Key": "2019e9445f715559a88de7582b7502964f49dde8240f1342c1ba6d56265c7b31.zip"
     },
     "Role": {
      "Fn::GetAtt": [
       "reportsTransactionsMonthlyFunctionHandlerServiceRole59E03DD5",
       "Arn"
      ]
     },
     "Environment": {
      "Variables": {
       "TABLE_DDB": "finances-reports-transactions-monthly",
       "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1"
      }
     },
     "FunctionName": "finances-sqsreports-transactions-monthly",
     "Handler": "index.handler",
     "MemorySize": 128,
     "Runtime": "nodejs16.x",
     "Timeout": 5
    },
    "DependsOn": [
     "reportsTransactionsMonthlyFunctionHandlerServiceRoleDefaultPolicy5CB66172",
     "reportsTransactionsMonthlyFunctionHandlerServiceRole59E03DD5"
    ],
    "Metadata": {
     "aws:cdk:path": "CombinedStack/TransactionsStack/TransactionsStack/reportsTransactionsMonthlyFunctionHandler/Resource",
     "aws:asset:path": "asset.2019e9445f715559a88de7582b7502964f49dde8240f1342c1ba6d56265c7b31",
     "aws:asset:is-bundled": true,
     "aws:asset:property": "Code"
    }
   },
   "reportsTransactionsMonthlyFunctionHandlerSqsEventSourceCombinedStackTransactionsStackSqsReportsTransactions14CF98D4DA619743": {
    "Type": "AWS::Lambda::EventSourceMapping",
    "Properties": {
     "FunctionName": {
      "Ref": "reportsTransactionsMonthlyFunctionHandler5AABCC69"
     },
     "EventSourceArn": {
      "Fn::GetAtt": [
       "SqsReportsTransactions17AFED51",
       "Arn"
      ]
     }
    },
    "Metadata": {
     "aws:cdk:path": "CombinedStack/TransactionsStack/TransactionsStack/reportsTransactionsMonthlyFunctionHandler/SqsEventSource:CombinedStackTransactionsStackSqsReportsTransactions14CF98D4/Resource"
    }
   },
   "createReportsTransactionsMonthlyFunctionHandlerServiceRoleA21421A4": {
    "Type": "AWS::IAM::Role",
    "Properties": {
     "AssumeRolePolicyDocument": {
      "Statement": [
       {
        "Action": "sts:AssumeRole",
        "Effect": "Allow",
        "Principal": {
         "Service": "lambda.amazonaws.com"
        }
       }
      ],
      "Version": "2012-10-17"
     },
     "ManagedPolicyArns": [
      {
       "Fn::Join": [
        "",
        [
         "arn:",
         {
          "Ref": "AWS::Partition"
         },
         ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
        ]
       ]
      }
     ]
    },
    "Metadata": {
     "aws:cdk:path": "CombinedStack/TransactionsStack/TransactionsStack/createReportsTransactionsMonthlyFunctionHandler/ServiceRole/Resource"
    }
   },
   "createReportsTransactionsMonthlyFunctionHandlerServiceRoleDefaultPolicy7BFC5FAC": {
    "Type": "AWS::IAM::Policy",
    "Properties": {
     "PolicyDocument": {
      "Statement": [
       {
        "Action": [
         "dynamodb:BatchGetItem",
         "dynamodb:BatchWriteItem",
         "dynamodb:ConditionCheckItem",
         "dynamodb:DeleteItem",
         "dynamodb:DescribeTable",
         "dynamodb:GetItem",
         "dynamodb:GetRecords",
         "dynamodb:GetShardIterator",
         "dynamodb:PutItem",
         "dynamodb:Query",
         "dynamodb:Scan",
         "dynamodb:UpdateItem"
        ],
        "Effect": "Allow",
        "Resource": [
         {
          "Fn::GetAtt": [
           "ReportsTransactionsMonthlyDdbD1EA9DE8",
           "Arn"
          ]
         },
         {
          "Ref": "AWS::NoValue"
         }
        ]
       }
      ],
      "Version": "2012-10-17"
     },
     "PolicyName": "createReportsTransactionsMonthlyFunctionHandlerServiceRoleDefaultPolicy7BFC5FAC",
     "Roles": [
      {
       "Ref": "createReportsTransactionsMonthlyFunctionHandlerServiceRoleA21421A4"
      }
     ]
    },
    "Metadata": {
     "aws:cdk:path": "CombinedStack/TransactionsStack/TransactionsStack/createReportsTransactionsMonthlyFunctionHandler/ServiceRole/DefaultPolicy/Resource"
    }
   },
   "createReportsTransactionsMonthlyFunctionHandlerB1D1EBDE": {
    "Type": "AWS::Lambda::Function",
    "Properties": {
     "Code": {
      "S3Bucket": "cdk-hnb659fds-assets-735084759467-sa-east-1",
      "S3Key": "7040f3e1e028fd841a7385d404e5b536ee2ea953b959e77ab4329ef61ed40d7a.zip"
     },
     "Role": {
      "Fn::GetAtt": [
       "createReportsTransactionsMonthlyFunctionHandlerServiceRoleA21421A4",
       "Arn"
      ]
     },
     "Environment": {
      "Variables": {
       "TABLE_DDB": "finances-reports-transactions-monthly",
       "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1"
      }
     },
     "FunctionName": "finances-create-reports-transactions-monthly",
     "Handler": "index.handler",
     "MemorySize": 128,
     "Runtime": "nodejs16.x",
     "Timeout": 5
    },
    "DependsOn": [
     "createReportsTransactionsMonthlyFunctionHandlerServiceRoleDefaultPolicy7BFC5FAC",
     "createReportsTransactionsMonthlyFunctionHandlerServiceRoleA21421A4"
    ],
    "Metadata": {
     "aws:cdk:path": "CombinedStack/TransactionsStack/TransactionsStack/createReportsTransactionsMonthlyFunctionHandler/Resource",
     "aws:asset:path": "asset.7040f3e1e028fd841a7385d404e5b536ee2ea953b959e77ab4329ef61ed40d7a",
     "aws:asset:is-bundled": true,
     "aws:asset:property": "Code"
    }
   },
   "CDKMetadata": {
    "Type": "AWS::CDK::Metadata",
    "Properties": {
     "Analytics": "v2:deflate64:H4sIAAAAAAAA/2VQy04DMQz8Fu5elxapcKUIbq1g2/vKm5gq+0hKnRRVUf6dbLZw4TTjGXtke4XrR7y/o2+plO6rwbQYdyye9d6T6iEbTZQvwfgRODC8fNpCEuirpdHp3H+gdihOIQkGGltNjXWaO8FdgbdglTfOgqERY+3mgYLvbjDqOpUzSyAPDYmwF3yeINe4CapnvyHhWzzGPPCX+nph6/cunBVv6XQy9jjl/VdTgpqlKFCy85XHW/evkWDaHDtZXJZrXD7l93RiTHUO1puRsZ7xB/7bqHo6AQAA"
    },
    "Metadata": {
     "aws:cdk:path": "CombinedStack/TransactionsStack/TransactionsStack/CDKMetadata/Default"
    }
   }
  },
  "Outputs": {
   "CombinedStackTransactionsStackcreateReportsTransactionsMonthlyFunctionHandler03F75746Arn": {
    "Value": {
     "Fn::GetAtt": [
      "createReportsTransactionsMonthlyFunctionHandlerB1D1EBDE",
      "Arn"
     ]
    }
   },
   "CombinedStackTransactionsStackSqsReportsTransactionsEDCF86C7Arn": {
    "Value": {
     "Fn::GetAtt": [
      "SqsReportsTransactions17AFED51",
      "Arn"
     ]
    }
   },
   "CombinedStackTransactionsStackSqsReportsTransactionsEDCF86C7Ref": {
    "Value": {
     "Ref": "SqsReportsTransactions17AFED51"
    }
   }
  }
 }